(self.webpackChunkflight=self.webpackChunkflight||[]).push([[790],{790:(t,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>a});var o=i(43),e=(i(50),i(228)),s=i.n(e),r=(i(433),i(856),i(579));const a=function(t){let{hotelsData:n,businessesData_destination:i,stationsData_destination:e,businessesData_origin:a,stationsData_origin:l,Destination:c,Origin:u}=t;const p=(0,o.useRef)(null);let d={},h=[];const f=s().divIcon({className:"custom-icon",html:'\n      <div style="\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: 22px;\n      ">\n        \ud83d\udecd\ufe0f\n      </div>\n    ',iconSize:[60,60],iconAnchor:[20,20],popupAnchor:[0,-20]}),g=s().divIcon({className:"custom-icon",html:'\n      <div style="\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: 22px;\n      ">\n        \ud83c\udfe2\n      </div>\n    ',iconSize:[60,60],iconAnchor:[20,20],popupAnchor:[0,-20]}),v=s().divIcon({className:"custom-icon",html:'\n      <div style="\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: 22px;\n      ">\n        \ud83d\ude8d\n      </div>\n    ',iconSize:[60,60],iconAnchor:[20,20],popupAnchor:[0,-20]}),y=s().divIcon({className:"custom-icon",html:'\n      <div style="\n        width: 80px;\n        height: 80px; \n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: 30px;\n      ">\n        \u2708\ufe0f\n      </div>\n    ',iconSize:[80,80],iconAnchor:[20,20],popupAnchor:[0,-20]}),m=()=>{d={};[{data:(null===n||void 0===n?void 0:n.data)||[],icon:g},{data:(null===i||void 0===i?void 0:i.businesses)||[],icon:f},{data:(null===a||void 0===a?void 0:a.businesses)||[],icon:f},{data:(null===e||void 0===e?void 0:e.stations)||[],icon:v},{data:(null===l||void 0===l?void 0:l.stations)||[],icon:v},{data:[c]||0,icon:y},{data:[u]||0,icon:y}].forEach((t=>{let{data:n,icon:i}=t;n.forEach((t=>{var n,o,e,s,r,a,l,c;let u=(null===t||void 0===t?void 0:t.latitude)||(null===(n=t.geoCode)||void 0===n?void 0:n.latitude)||(null===(o=t.place)||void 0===o||null===(e=o.location)||void 0===e?void 0:e.lat)||(null===(s=t.coordinates)||void 0===s?void 0:s.latitude),p=(null===t||void 0===t?void 0:t.longitude)||(null===(r=t.geoCode)||void 0===r?void 0:r.longitude)||(null===(a=t.place)||void 0===a||null===(l=a.location)||void 0===l?void 0:l.lng)||(null===(c=t.coordinates)||void 0===c?void 0:c.longitude);if(!u||!p)return void console.warn("Missing coordinates for item:",t);const h="".concat(u,",").concat(p);d[h]||(d[h]={items:[],icon:i}),d[h].items.push(t)}))})),console.log("Grouped Locations:",d),_()},_=()=>{for(const c in d){var t,n,i,o,e,r,a,l;const{items:u,icon:f}=d[c],g=u[0];let v=g.latitude||(null===(t=g.coordinates)||void 0===t?void 0:t.latitude)||(null===(n=g.geoCode)||void 0===n?void 0:n.latitude)||(null===(i=g.place)||void 0===i||null===(o=i.location)||void 0===o?void 0:o.lat),y=g.longitude||(null===(e=g.coordinates)||void 0===e?void 0:e.longitude)||(null===(r=g.geoCode)||void 0===r?void 0:r.longitude)||(null===(a=g.place)||void 0===a||null===(l=a.location)||void 0===l?void 0:l.lng);if(!v||!y){console.warn("Missing coordinates for item:",g);continue}if(v=parseFloat(v),y=parseFloat(y),isNaN(v)||isNaN(y)){console.warn("Invalid coordinates: ".concat(v,", ").concat(y));continue}const m=b(u),_=s().marker([v,y],{icon:f});_.bindPopup(m,{maxHeight:400}),_.addTo(p.current),h.push(_)}},b=t=>{let n='<div class="popup-content">';return t.forEach((t=>{n+="<div> ".concat(t.name||t.place.name||"Unnamed","</div>")})),n+="</div>",n},x=()=>{if(!u||!c)return;const t=[u.latitude,u.longitude],n=[c.latitude,c.longitude];if(t.includes(void 0)||n.includes(void 0))return void console.warn("Missing coordinates for Origin or Destination");const i=s().polyline([t,n],{color:"blue",weight:4,opacity:.7,dashArray:"5, 10",lineJoin:"round"}).addTo(p.current);s().polylineDecorator(i,{patterns:[{offset:"100%",repeat:0,symbol:s().Symbol.arrowHead({pixelSize:35,polygon:!0,pathOptions:{color:"blue",fillOpacity:1,weight:0}})}]}).addTo(p.current)};return(0,o.useEffect)((()=>(p.current||(p.current=s().map("map").setView([20,0],2),s().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(p.current),console.log("Hotels Data:",n),console.log("Businesses Data d:",i),console.log("Businesses Data o:",a),console.log("Stations Data d:",e),console.log("Stations Data o:",l),console.log("Destination:",c),console.log("Origin:",u),m(),x()),()=>{p.current&&(p.current.off(),p.current.remove(),p.current=null)})),[]),(0,r.jsx)("div",{id:"map",style:{height:"500px",width:"100%"}})}},856:function(t,n,i){!function(t){"use strict";function n(t,n){var i=n.x-t.x,o=n.y-t.y;return Math.sqrt(i*i+o*o)}t=t&&t.hasOwnProperty("default")?t.default:t;var i=function(t,n){return(180*Math.atan2(n.y-t.y,n.x-t.x)/Math.PI+90+360)%360},o=function(t,n){var i=t.value;return t.isInPixels?i/n:i};function e(t){if("string"===typeof t&&-1!==t.indexOf("%"))return{value:parseFloat(t)/100,isInPixels:!1};var n=t?parseFloat(t):0;return{value:n,isInPixels:n>0}}var s=function(t,n){return t.x===n.x&&t.y===n.y};function r(t){return t.reduce((function(t,o,e,r){if(e>0&&!s(o,r[e-1])){var a=r[e-1],l=t.length>0?t[t.length-1].distB:0,c=n(a,o);t.push({a:a,b:o,distA:l,distB:l+c,heading:i(a,o)})}return t}),[])}function a(t,n){var i=r(t),e=i.length;if(0===e)return[];var s=i[e-1].distB,a=o(n.offset,s),c=o(n.endOffset,s),u=s*o(n.repeat,s),p=c>0?s*c:0,d=[],h=a>0?s*a:0;do{d.push(h),h+=u}while(u>0&&h<s-p);var f=0,g=i[0];return d.map((function(t){for(;t>g.distB&&f<e-1;)f++,g=i[f];var n=(t-g.distA)/(g.distB-g.distA);return{pt:l(g.a,g.b,n),heading:g.heading}}))}function l(t,n,i){return n.x!==t.x?{x:t.x+i*(n.x-t.x),y:t.y+i*(n.y-t.y)}:{x:t.x,y:t.y+(n.y-t.y)*i}}(function(){var t=L.Marker.prototype._initIcon,n=L.Marker.prototype._setPos,i="msTransform"===L.DomUtil.TRANSFORM;L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){t.call(this)},_setPos:function(t){n.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}})})(),t.Symbol=t.Symbol||{},t.Symbol.Dash=t.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(n){t.Util.setOptions(this,n),this.options.pathOptions.clickable=!1},buildSymbol:function(n,i,o,e,s){var r=this.options,a=Math.PI/180;if(r.pixelSize<=1)return t.polyline([n.latLng,n.latLng],r.pathOptions);var l=o.project(n.latLng),c=-(n.heading-90)*a,u=t.point(l.x+r.pixelSize*Math.cos(c+Math.PI)/2,l.y+r.pixelSize*Math.sin(c)/2),p=l.add(l.subtract(u));return t.polyline([o.unproject(u),o.unproject(p)],r.pathOptions)}}),t.Symbol.dash=function(n){return new t.Symbol.Dash(n)},t.Symbol.ArrowHead=t.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(n){t.Util.setOptions(this,n),this.options.pathOptions.clickable=!1},buildSymbol:function(n,i,o,e,s){return this.options.polygon?t.polygon(this._buildArrowPath(n,o),this.options.pathOptions):t.polyline(this._buildArrowPath(n,o),this.options.pathOptions)},_buildArrowPath:function(n,i){var o=Math.PI/180,e=i.project(n.latLng),s=-(n.heading-90)*o,r=this.options.headAngle/2*o,a=s+r,l=s-r,c=t.point(e.x-this.options.pixelSize*Math.cos(a),e.y+this.options.pixelSize*Math.sin(a)),u=t.point(e.x-this.options.pixelSize*Math.cos(l),e.y+this.options.pixelSize*Math.sin(l));return[i.unproject(c),n.latLng,i.unproject(u)]}}),t.Symbol.arrowHead=function(n){return new t.Symbol.ArrowHead(n)},t.Symbol.Marker=t.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(n){t.Util.setOptions(this,n),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(n,i,o,e,s){return this.options.rotate&&(this.options.markerOptions.rotationAngle=n.heading+(this.options.angleCorrection||0)),t.marker(n.latLng,this.options.markerOptions)}}),t.Symbol.marker=function(n){return new t.Symbol.Marker(n)};var c=function(n){return n instanceof t.LatLng||Array.isArray(n)&&2===n.length&&"number"===typeof n[0]},u=function(t){return Array.isArray(t)&&c(t[0])};t.PolylineDecorator=t.FeatureGroup.extend({options:{patterns:[]},initialize:function(n,i){t.FeatureGroup.prototype.initialize.call(this),t.Util.setOptions(this,i),this._map=null,this._paths=this._initPaths(n),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(n,i){var o=this;return u(n)?[i?n.concat([n[0]]):n]:n instanceof t.Polyline?this._initPaths(n.getLatLngs(),n instanceof t.Polygon):Array.isArray(n)?n.reduce((function(t,n){return t.concat(o._initPaths(n,i))}),[]):[]},_initPatterns:function(t){return t.map(this._parsePatternDef)},setPatterns:function(t){this.options.patterns=t,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(t){this._paths=this._initPaths(t),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(t,n){return{symbolFactory:t.symbol,offset:e(t.offset),endOffset:e(t.endOffset),repeat:e(t.repeat)}},onAdd:function(t){this._map=t,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(n){this._map.off("moveend",this.redraw,this),this._map=null,t.FeatureGroup.prototype.onRemove.call(this,n)},_initBounds:function(){var n=this._paths.reduce((function(t,n){return t.concat(n)}),[]);return t.latLngBounds(n)},getBounds:function(){return this._bounds},_buildSymbols:function(t,n,i){var o=this;return i.map((function(e,s){return n.buildSymbol(e,t,o._map,s,i.length)}))},_getDirectionPoints:function(n,i){var o=this;return n.length<2?[]:a(n.map((function(t){return o._map.project(t)})),i).map((function(n){return{latLng:o._map.unproject(t.point(n.pt)),heading:n.heading}}))},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(n){var i=this,o=this._map.getBounds().pad(.1);return this._paths.map((function(e){var s=i._getDirectionPoints(e,n).filter((function(t){return o.contains(t.latLng)}));return t.featureGroup(i._buildSymbols(e,n.symbolFactory,s))}))},_draw:function(){var n=this;this._patterns.map((function(t){return n._getPatternLayers(t)})).forEach((function(i){n.addLayer(t.featureGroup(i))}))}}),t.polylineDecorator=function(n,i){return new t.PolylineDecorator(n,i)}}(i(228))}}]);
//# sourceMappingURL=790.63b55b4e.chunk.js.map